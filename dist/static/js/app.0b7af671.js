(function(e){function t(t){for(var o,n,i=t[0],a=t[1],d=t[2],b=0,s=[];b<i.length;b++)n=i[b],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&s.push(l[n][0]),l[n]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);m&&m(t);while(s.length)s.shift()();return r.push.apply(r,d||[]),c()}function c(){for(var e,t=0;t<r.length;t++){for(var c=r[t],o=!0,i=1;i<c.length;i++){var a=c[i];0!==l[a]&&(o=!1)}o&&(r.splice(t--,1),e=n(n.s=c[0]))}return e}var o={},l={app:0},r=[];function n(t){if(o[t])return o[t].exports;var c=o[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=o,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(c,o,function(t){return e[t]}.bind(null,o));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var m=a;r.push([0,"chunk-vendors"]),c()})({0:function(e,t,c){e.exports=c("cd49")},"19bd":function(e,t,c){"use strict";c("d2c8")},cd49:function(e,t,c){"use strict";c.r(t);var o=c("7a23"),l=c("3ef4"),r=c("f6f2");const n={class:"app-div"},i=Object(o["createElementVNode"])("div",{class:"title-div"},[Object(o["createElementVNode"])("h1",null,"公司工时统计系统")],-1),a={class:"workTime-div"},d={class:"workTime-table"},m={key:0},b={key:1},s={key:0},u={key:1},p={key:0},O={key:1},j=Object(o["createElementVNode"])("div",{class:"el-upload__text"},[Object(o["createElementVNode"])("h3",null,"将文件拖拽到此处或点击图标上传文件")],-1),k=Object(o["createElementVNode"])("div",{class:"el-upload__tip",style:{"text-align":"center"}},[Object(o["createElementVNode"])("h3",null,"请上传文本文件！")],-1),w={class:"workTime-use"},f={class:"function"},T=Object(o["createElementVNode"])("h1",null,"功能模块",-1),h={class:"info"},x=Object(o["createElementVNode"])("h1",null,"工时统计",-1),V=Object(o["createTextVNode"])(" 当月工作时长："),y=Object(o["createTextVNode"])(" 天 "),g=Object(o["createElementVNode"])("br",null,null,-1),v=Object(o["createTextVNode"])(" 总工时："),N=Object(o["createTextVNode"])(" 时 "),C=Object(o["createElementVNode"])("br",null,null,-1),E=Object(o["createTextVNode"])(" 日平均工时： "),_=Object(o["createTextVNode"])(" 时 "),B=Object(o["createElementVNode"])("br",null,null,-1),D={key:0,class:"info"},S={key:0,style:{color:"green"}},R={key:1,style:{color:"red"}},W={class:"guide"},K=Object(o["createElementVNode"])("h1",{style:{"text-align":"center"}},"使用说明",-1),F={style:{"margin-left":"10px"}},M=Object(o["createElementVNode"])("h5",null,"1.在OA系统中，将需要计算的工时复制到txt文本中；(参考src/assets/test.txt格式)",-1),P=Object(o["createElementVNode"])("h5",null,"2.点击表格区域的上传文件按钮打开工时文件，或将工时文件拖拽至目标区域；",-1),U=Object(o["createElementVNode"])("h5",null,"3.将有上下班未打卡的时间补充完整(双击单元格更改)；",-1),I=Object(o["createElementVNode"])("h5",null,"4.点击计算工时按钮，查看工时统计信息。",-1),A=Object(o["createTextVNode"])("Github地址");var z=Object(o["defineComponent"])({__name:"App",setup(e){const t=Object(o["ref"])(),c=Object(o["ref"])(),z=Object(o["ref"])(),L=Object(o["reactive"])({workTime:[],clickRow:0,clickCell:0,tabClickLabel:"",totalWorkTime:"0",dailyWorkTime:"0",isCalWorkTime:!1});let J="";const Y=e=>{if("txt"===e.name.split(".").slice(-1)[0])if(window.FileReader){var t=new FileReader;t.onload=e=>{L.workTime.splice(0);const t=e.target.result.split("\n");G(t)},t.readAsText(e.raw)}else l["a"].error("该浏览器不支持文件读取 请更改浏览器 推荐使用谷歌浏览器");else l["a"].error("请选择正确的txt文件")},G=e=>{try{for(let t=0;t<e.length;t++)if(""!==e[t]){const c=e[t].split("\t");L.workTime.push({index:t,id:c[1],name:c[2],date:c[3],startTime:c[4],endTime:c[5]})}l["a"].success("读取数据成功！")}catch(t){l["a"].error("无法正确解析该txt文件")}},H=()=>{L.workTime.splice(0),L.totalWorkTime="0",L.dailyWorkTime="0",L.isCalWorkTime=!1},q=()=>{if(0!==L.workTime.length&&(""===L.workTime[L.workTime.length-1].startTime||""===L.workTime[L.workTime.length-1].endTime))return void l["a"].error("有未完成的上下班打卡！");const e=new Date;L.workTime.push({index:L.workTime.length+1,id:"",name:"",date:e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),startTime:"",endTime:""}),L.clickRow=L.workTime.length-1,L.clickCell=3,Object(o["nextTick"])(()=>{t.value.input.focus()})},Q=()=>{0!==L.workTime.length?(L.workTime.pop(),l["a"].success("减少最后一个数据成功！")):l["a"].error("没有工时数据！")},X=()=>{if(0===L.workTime.length)return void l["a"].error("没有工时数据！");let e=0;for(let t=0;t<L.workTime.length;t++){if(" "===L.workTime[t].startTime)return l["a"].error("第"+(t+1).toString()+"列有未完成的上班打卡 请先双击表格填写完整！"),L.clickRow=t,L.clickCell=4,L.workTime[t].startTime="08:30:00",void Object(o["nextTick"])(()=>{c.value.input.focus()});if(" "===L.workTime[t].endTime)return l["a"].error("第"+(t+1).toString()+"列有未完成的下班打卡 请先双击表格填写完整！"),L.clickRow=t,L.clickCell=5,L.workTime[t].endTime="17:00:00",void Object(o["nextTick"])(()=>{z.value.input.focus()});{const c=new Date(L.workTime[t].date+" "+L.workTime[t].startTime);c.getHours()<=8&&c.getMinutes()<=30&&(L.workTime[t].startTime="08:30:00");const o=Date.parse(L.workTime[t].date+" "+L.workTime[t].endTime)-Date.parse(L.workTime[t].date+" "+L.workTime[t].startTime);if(!(o>0))return void l["a"].error("第"+(t+1).toString()+"列数据打卡时间异常！请确定下班时间大于上班时间！");e+=o/1e3/60}}L.totalWorkTime=(e/60).toFixed(2),L.dailyWorkTime=(e/60/L.workTime.length).toFixed(2),L.isCalWorkTime=!0},Z=(e,t)=>{if("日期"===t.label||"上班时间"===t.label||"下班时间"===t.label){const c=new Date;switch(t.label){case"日期":""===L.workTime[e.index].date.trim()&&(L.workTime[e.index].date=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate());break;case"上班时间":""===L.workTime[e.index].startTime.trim()&&(L.workTime[e.index].startTime="08:30:00");break;case"下班时间":""===L.workTime[e.index].endTime.trim()&&(L.workTime[e.index].endTime="17:00:00");break;default:break}L.clickRow=e.index,L.clickCell=t.index,L.tabClickLabel=t.label}},$=({row:e,rowIndex:t})=>{e.index=t},ee=({column:e,columnIndex:t})=>{e.index=t},te=()=>{L.clickRow=0,L.clickCell=0,L.tabClickLabel=""},ce=()=>{if(J="",0!==L.workTime.length){for(let e=0;e<L.workTime.length;e++)J+=L.workTime[e].index+"\t"+L.workTime[e].id+"\t"+L.workTime[e].name+"\t"+L.workTime[e].date+"\t"+L.workTime[e].startTime+"\t"+L.workTime[e].endTime+"\n";localStorage.setItem("workTimeData",J),l["a"].success("保存数据成功！")}else l["a"].error("没有工时数据！")},oe=()=>{if(L.workTime.splice(0),null===localStorage.getItem("workTimeData"))return void l["a"].error("没有工时数据！");const e=localStorage.getItem("workTimeData"),t=e.split("\n");G(t)};return(e,l)=>{const J=Object(o["resolveComponent"])("el-table-column"),G=Object(o["resolveComponent"])("el-input"),le=Object(o["resolveComponent"])("el-table"),re=Object(o["resolveComponent"])("el-icon"),ne=Object(o["resolveComponent"])("el-upload"),ie=Object(o["resolveComponent"])("el-col"),ae=Object(o["resolveComponent"])("el-button"),de=Object(o["resolveComponent"])("el-tooltip"),me=Object(o["resolveComponent"])("el-link"),be=Object(o["resolveComponent"])("el-row");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",n,[i,Object(o["createElementVNode"])("div",a,[Object(o["createVNode"])(be,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ie,{span:18},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",d,[Object(o["createVNode"])(le,{data:L.workTime,border:"",stripe:"",onCellDblclick:Z,"row-class-name":$,"cell-class-name":ee,style:{width:"100%"}},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(J,{align:"center",label:"序号",width:"65"},{default:Object(o["withCtx"])(e=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.row.index+1),1)]),_:1}),Object(o["createVNode"])(J,{prop:"id",align:"center",label:"工号",width:"200"}),Object(o["createVNode"])(J,{prop:"name",align:"center",label:"姓名",width:"200"}),Object(o["createVNode"])(J,{align:"center",label:"日期",width:"200"},{default:Object(o["withCtx"])(e=>[e.row.index===L.clickRow&&e.column.index===L.clickCell?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",m,[Object(o["createVNode"])(G,{ref_key:"dateRef",ref:t,modelValue:e.row.date,"onUpdate:modelValue":t=>e.row.date=t,maxlength:"300",size:"small",onKeyup:Object(o["withKeys"])(te,["enter"]),onBlur:te},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",b,Object(o["toDisplayString"])(e.row.date),1))]),_:1}),Object(o["createVNode"])(J,{align:"center",label:"上班时间",width:"200"},{default:Object(o["withCtx"])(e=>[e.row.index===L.clickRow&&e.column.index===L.clickCell?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",s,[Object(o["createVNode"])(G,{ref_key:"startTimeRef",ref:c,modelValue:e.row.startTime,"onUpdate:modelValue":t=>e.row.startTime=t,maxlength:"300",size:"small",onKeyup:Object(o["withKeys"])(te,["enter"]),onBlur:te},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",u,Object(o["toDisplayString"])(e.row.startTime),1))]),_:1}),Object(o["createVNode"])(J,{align:"center",label:"下班时间",width:"200","show-overflow-tooltip":""},{default:Object(o["withCtx"])(e=>[e.row.index===L.clickRow&&e.column.index===L.clickCell?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",p,[Object(o["createVNode"])(G,{ref_key:"endTimeRef",ref:z,modelValue:e.row.endTime,"onUpdate:modelValue":t=>e.row.endTime=t,maxlength:"300",size:"small",onKeyup:Object(o["withKeys"])(te,["enter"]),onBlur:te},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",O,Object(o["toDisplayString"])(e.row.endTime),1))]),_:1})]),_:1},8,["data"]),Object(o["withDirectives"])(Object(o["createVNode"])(ne,{class:"upload-demo",drag:"",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15",multiple:"","on-change":Y},{tip:Object(o["withCtx"])(()=>[k]),default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(re,{class:"el-icon--upload"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(Object(o["unref"])(r["f"]))]),_:1}),j]),_:1},512),[[o["vShow"],0===L.workTime.length]])])]),_:1}),Object(o["createVNode"])(ie,{span:6},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",w,[Object(o["createElementVNode"])("div",f,[T,Object(o["createVNode"])(de,{class:"box-item",effect:"dark",content:"重新读取文本",placement:"top"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ae,{type:"primary",icon:Object(o["unref"])(r["f"]),circle:"",onClick:l[0]||(l[0]=e=>H())},null,8,["icon"])]),_:1}),Object(o["createVNode"])(de,{class:"box-item",effect:"dark",content:"保存本地数据",placement:"top"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ae,{type:"primary",icon:Object(o["unref"])(r["a"]),circle:"",onClick:l[1]||(l[1]=e=>ce())},null,8,["icon"])]),_:1}),Object(o["createVNode"])(de,{class:"box-item",effect:"dark",content:"读取本地数据",placement:"top"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ae,{type:"primary",icon:Object(o["unref"])(r["b"]),circle:"",onClick:l[2]||(l[2]=e=>oe())},null,8,["icon"])]),_:1}),Object(o["createVNode"])(de,{class:"box-item",effect:"dark",content:"增加一行数据",placement:"top"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ae,{type:"primary",icon:Object(o["unref"])(r["e"]),circle:"",onClick:l[3]||(l[3]=e=>q())},null,8,["icon"])]),_:1}),Object(o["createVNode"])(de,{class:"box-item",effect:"dark",content:"减少一行数据",placement:"top"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ae,{type:"primary",icon:Object(o["unref"])(r["d"]),circle:"",onClick:l[4]||(l[4]=e=>Q())},null,8,["icon"])]),_:1}),Object(o["createVNode"])(de,{class:"box-item",effect:"dark",content:"计算工时",placement:"top"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(ae,{type:"primary",icon:Object(o["unref"])(r["c"]),circle:"",onClick:l[5]||(l[5]=e=>X())},null,8,["icon"])]),_:1})]),Object(o["createElementVNode"])("div",h,[x,V,Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(L.workTime.length),1),y,g,v,Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(L.totalWorkTime),1),N,C,E,Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(L.dailyWorkTime),1),_,B]),L.isCalWorkTime?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,[parseFloat(L.dailyWorkTime)>=8.5?(Object(o["openBlock"])(),Object(o["createElementBlock"])("h3",S,"您的工时已达到公司要求 请再接再厉！")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("h3",R,"您的工时未达到公司要求 请及时调整！"))])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",W,[K,Object(o["createElementVNode"])("div",F,[M,P,U,I,Object(o["createElementVNode"])("h5",null,[Object(o["createVNode"])(me,{href:"https://github.com/Cxx0822/working-time-statistics",target:"_blank",type:"primary"},{default:Object(o["withCtx"])(()=>[A]),_:1})])])])])]),_:1})]),_:1})])])}}});c("19bd");const L=z;var J=L,Y=c("c3a1"),G=(c("7437"),c("a471"),c("3ef0")),H=c.n(G);const q=Object(o["createApp"])(J);q.use(Y["a"],{locale:H.a}),q.mount("#app")},d2c8:function(e,t,c){}});